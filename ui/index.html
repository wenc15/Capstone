<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Growin â€“ Mock UI</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div class="app" id="app">
    <header class="topbar">
      <div class="brand">Growin</div>
      <div class="weather-chip">â˜ï¸ <span>??Â°C</span></div>
    </header>

    <section class="main">
      <aside class="sidebar">
        <button class="nav-btn" id="navTimer">ğŸ•‘ <span>Timer</span></button>
        <button class="nav-btn" id="navStats">ğŸ“Š <span>Statistics</span></button>
        <button class="nav-btn">ğŸŒ¿ <span>Pet</span></button>
        <div class="pet-placeholder">Pet Placeholder</div>
      </aside>

      <div class="content">
        <!-- è®¡æ—¶å™¨è§†å›¾ -->
        <div id="view-timer">
          <div class="timer" id="timerDisplay">25:00</div>

          <div class="time-control">
            <div class="control-row">
              <input id="timeRange" type="range" min="1" max="60" step="1" value="25" />
              <output id="timeValue" for="timeRange">25 min</output>
            </div>
          </div>

          <!-- å¹¶æ’æŒ‰é’®ï¼šStart/Pause/Resume + Reset -->
          <div class="actions">
            <button class="primary"   id="startBtn">Start</button>
            <button class="secondary" id="resetBtn" style="display:none;">Reset</button>
          </div>

          <!-- ä¼šè¯å¤‡æ³¨/åº”ç”¨å -->
          <div style="max-width:520px;margin:0 auto 14px;display:flex;gap:10px;">
            <input id="sessionNote" type="text" placeholder="App used / Notes (optional)"
                   style="flex:1;padding:10px 12px;border-radius:12px;border:1px solid var(--muted);font-size:14px;">
          </div>

          <div class="grid">
            <div class="card">
              <h3>Your Cards</h3>
              <button class="placeholder-btn">Open Cards</button>
            </div>
            <div class="card">
              <h3>Session Summary</h3>
              <div>Focus Time: <span id="sumFocusTime">â€”</span></div>
              <div>Distractions: <span id="sumDistractions">?</span></div>
              <div>Cards Collected: <span id="sumCards">?</span></div>
            </div>
          </div>
        </div>

        <!-- ç»Ÿè®¡è§†å›¾ï¼ˆé»˜è®¤éšè—ï¼Œç”± renderer.js åˆ‡æ¢æ˜¾ç¤ºï¼‰ -->
        <div id="view-stats" style="display:none;">
          <h2 style="margin:6px 0 12px;">Statistics</h2>

          <div class="grid">
            <div class="card">
              <h3>Recent Sessions</h3>
              <div class="stat">Total Sessions: <span id="statCount">0</span></div>
              <div class="stat">Total Focus (last 7 days): <span id="statTotal">0 min</span></div>
              <div class="stat">Last Note/App: <span id="statLastNote">â€”</span></div>
            </div>

            <div class="card">
              <h3>Daily Focus (Last 7 Days)</h3>
              <canvas id="focusChart" width="400" height="220"></canvas>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Floating widget placeholder (draggable) -->
    <div class="floating-widget" id="widget" title="Widget"></div>
  </div>

  <!-- ä»…ä¿ç•™æ‹–æ‹½è„šæœ¬ï¼›æ»‘æ¡ä¸è®¡æ—¶é€»è¾‘åœ¨ renderer.js -->
  <script>
    (function(){
      const widget = document.getElementById('widget');
      const app = document.getElementById('app');
      let dragging = false; let startX=0, startY=0, startLeft=0, startTop=0;

      const onMouseDown = (e)=>{
        dragging = true; widget.style.cursor = 'grabbing';
        const rect = widget.getBoundingClientRect();
        startX = e.clientX; startY = e.clientY;
        const appRect = app.getBoundingClientRect();
        startLeft = rect.left - appRect.left; startTop = rect.top - appRect.top;
        e.preventDefault();
      };
      const onMouseMove = (e)=>{
        if(!dragging) return;
        const appRect = app.getBoundingClientRect();
        let newLeft = startLeft + (e.clientX - startX);
        let newTop  = startTop  + (e.clientY - startY);
        const maxLeft = appRect.width - widget.offsetWidth - 8;
        const maxTop  = appRect.height - widget.offsetHeight - 8;
        newLeft = Math.max(8, Math.min(maxLeft, newLeft));
        newTop  = Math.max(8, Math.min(maxTop, newTop));
        widget.style.left = newLeft + 'px';
        widget.style.top  = newTop + 'px';
      };
      const onMouseUp = ()=>{ dragging = false; widget.style.cursor = 'grab'; };

      widget.addEventListener('mousedown', onMouseDown);
      window.addEventListener('mousemove', onMouseMove);
      window.addEventListener('mouseup', onMouseUp);

      widget.addEventListener('touchstart', (e)=>{ onMouseDown(e.touches[0]); });
      window.addEventListener('touchmove', (e)=>{ onMouseMove(e.touches[0]); });
      window.addEventListener('touchend', onMouseUp);
    })();
  </script>

  <!-- toast å®¹å™¨ï¼ˆä¾› renderer.js ä½¿ç”¨ï¼‰ -->
  <div id="doneToast" class="toast" aria-live="polite"></div>

  <!-- ç»Ÿè®¡å›¾è¡¨åº“ï¼ˆéœ€åœ¨ renderer.js ä¹‹å‰ï¼‰ -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <!-- åœ¨é¡µé¢æœ«å°¾å¼•å…¥æ¸²æŸ“è„šæœ¬ -->
  <script type="module" src="./renderer.js"></script>
</body>
</html>
